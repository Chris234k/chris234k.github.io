---
layout: null
title: Typing Practice
permalink: /typing/
---

<!DOCTYPE html>
<html>
	<head> 
		<link rel="stylesheet" href="/assets/css/typing-styles.css">
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />
	</head>
<body onload="onLoad()">

<br>
Woah. What are you doing here? You're not supposed to be here...

<div class="main-box">
	<div style="float: left; width: 50%">
		<p>[current]</p>
		<p id="score"></p>
		<p id="time"></p>
		<p id="wpm"></p>
	</div>
	
	<div style="float: left; width: 50%; text-align: right;">
		<p>[total]</p>
		<p id="totalScore">0</p>
		<p id="totalElapsed">0</p>
		<p id="totalwpm">0</p>
	</div>
	
	<button onclick="reset()">Reset</button>
	<br>
	<br>
	
	<div class="typing">
		<p id="target"></p>
		<input id="inputField" type="text" placeholder="Begin typing..." oninput="inputChange()">
	</div>
</div>

<script>
	
	isTiming = false;
	
	// round data
	score = 0;
	roundTime = Date.now();
	
	// totals
	totalScore = 0;
	totalTyped = 0;
	totalLength = 0;
	totalWPM = 0;
	totalElapsed = 0;
	
	document.addEventListener("keydown", onKeyDown, false);
	
	// https://www.gamesradar.com/best-video-game-quotes-all-time/
	quotes = [
		"We all make choices in life, but in the end our choices make us.",
		"Get over here!",
		"What is better? To be born good or to overcome your evil nature through great effort?",
		"The right man in the wrong place can make all the difference in the world.",
		"Stand in the ashes of a trillion dead souls, and asks the ghosts if honor matters. The silence is your answer.",
		"Bring me a bucket, and I'll show you a bucket!",
		"Wanting something does not give you the right to have it.",
		"Itâ€™s a funny thing, ambition. It can take one to sublime heights or harrowing depths. And sometimes they are one and the same.",
		"A hero need not speak. When he is gone, the world will speak for him.",
		"No gods or kings. Only man.",
		"Life is cruel. Of this I have no doubt. One can only hope that one leaves behind a lasting legacy. But so often, the legacies we leave behind... are not the ones we intended."
	]	
	
	
	function onKeyDown(key) {
		if(!isTiming) {
			isTiming = true;
			roundTime = Date.now();
		}
		
		if(key.key == "Escape") {
			reset();
		} else if (key.key == "Enter") {
			submit();
		}
	}
	
	function onLoad() {
		document.getElementById("inputField").focus();
		
		reset();
	}
	
	function reset() {
		isTiming = false;
		score = 0;
		document.getElementById("inputField").value = "";
		document.getElementById("score").innerText = buildScoreString(score, 0);
		document.getElementById("time").innerText = "elapsed: " + 0;
		document.getElementById("wpm").innerText = "wpm: " + 0;
		
		random = Math.floor(Math.random() * quotes.length);
		document.getElementById("target").innerText = quotes[random];
	}
	
	function submit() {
		totalScore += score;
		totalTyped += document.getElementById("inputField").value.length;
		totalLength += document.getElementById("target").innerText.length;
		
		totalElapsed += ((Date.now() - roundTime) / 1000); // elapsed time is represented as the sum of all segments
		totalWPM = Math.floor((totalTyped / 5) / (totalElapsed / 60));
		
		document.getElementById("totalScore").innerText = buildScoreString(totalScore, totalLength);
		document.getElementById("totalElapsed").innerText = "elapsed: " + totalElapsed;
		document.getElementById("totalwpm").innerText = "wpm: " + totalWPM;
		
		reset();
	}
	
	function inputChange() {
		typed = document.getElementById("inputField").value;
		target = document.getElementById("target").innerText;
		
		score = 0;
		for(i = 0; i < typed.length; i++) {
			if(i < target.length) {
				if(typed.charAt(i) == target.charAt(i)) {
					score++;
				}
			}
		}
		document.getElementById("score").innerText = buildScoreString(score, target.length);
		
		elapsed = ((Date.now() - roundTime) / 1000);
		document.getElementById("time").innerText = "elapsed: " + elapsed;
		
		// https://www.speedtypingonline.com/typing-equations
		wpm = Math.floor((typed.length / 5) / (elapsed / 60));
		document.getElementById("wpm").innerText = "wpm: " + wpm;
		
		renderErrors();
	}
	
	function renderErrors() {
		typed = document.getElementById("inputField").value;
		target = document.getElementById("target").innerText;
		
		result = "";
		
		for(i = 0; i < target.length; i++) {
			char = target.charAt(i);
			if(i < typed.length) {
				if(char == typed.charAt(i)) {
					result += char;
				} else {
					result += incorrectLetter(char);
				}
			} else {
				result += char;
			}
		}
		
		document.getElementById("target").innerHTML = result;
	}
	
	function incorrectLetter(letter) {
		return "<span class=\"incorrect\">"+letter+"<\/span>";
	}
	
	function buildScoreString(currentScore, targetLength) {
		accuracy = 0;
		if(targetLength > 0) {
			accuracy = (currentScore / targetLength) * 100;
			accuracy = accuracy.toFixed(0);
		}
		
		return "score: " + currentScore + "/" + targetLength + " (" + accuracy + "%)";
	}
</script>

</body>
</html>