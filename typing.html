---
layout: null
title: Typing Practice
permalink: /typing/
---

<!DOCTYPE html>
<html>
	<head> 
		<link rel="stylesheet" href="/assets/css/typing-styles.css">
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Inconsolata" />
	</head>
<body onload="onLoad()">

<br>
Woah. What are you doing here? You're not supposed to be here...

<div class="main-box">
	<div style="float: left; width: 50%">
		<p>[current]</p>
		<p id="score"></p>
		<p id="time"></p>
		<p id="wpm"></p>
	</div>
	
	<div style="float: left; width: 50%; text-align: right;">
		<p>[total]</p>
		<p id="totalScore">0</p>
		<p id="totalTime">0</p>
		<p id="totalwpm">0</p>
	</div>
	
	<button onclick="reset()">Reset</button>
	<br>
	<br>
	
	<div class="typing">
		<p id="target"></p>
		<input id="inputField" type="text" placeholder="Begin typing..." oninput="inputChange()">
	</div>
</div>

<script>
	score = 0;
	
	totalScore = 0;
	totalTyped = 0;
	totalLength = 0;
	totalWPM = 0;
	
	isTiming = false;
	roundTime = Date.now();
	totalTime = Date.now();
	document.addEventListener("keydown", onKeyDown, false);
	
	function onKeyDown(key) {
		if(!isTiming) {
			isTiming = true;
			roundTime = Date.now();
		}
		
		if(key.key == "Escape") {
			reset();
		} else if (key.key == "Enter") {
			submit();
		}
	}
	
	function onLoad() {
		document.getElementById("target").innerText = "The quick brown fox jumps over the lazy dog.";
		document.getElementById("inputField").focus();
		
		reset();
	}
	
	function reset() {
		isTiming = false;
		score = 0;
		document.getElementById("inputField").value = "";
		setScoreText(score, 0, 0);
		document.getElementById("time").innerText = "elapsed: " + 0;
		document.getElementById("wpm").innerText = "wpm: " + 0;
	}
	
	function submit() {
		totalScore += score;
		totalTyped += document.getElementById("inputField").value.length;
		totalLength += document.getElementById("target").innerText.length;
		
		elapsed = (Date.now() - totalTime) / 1000;
		totalWPM = Math.floor((totalTyped / 5) / (elapsed / 60));
		
		accuracy = 0;
		if(totalTyped > 0) {
			accuracy = (totalScore / totalTyped) * 100;
			accuracy = accuracy.toFixed(0);
		}
		
		document.getElementById("totalScore").innerText = "score: " + totalScore + "/" + totalLength + " (" + accuracy + "%)";
		document.getElementById("totalTime").innerText = "elapsed: " + elapsed;
		document.getElementById("totalwpm").innerText = "wpm: " + totalWPM;
		
		reset();
	}
	
	function inputChange() {
		typed = document.getElementById("inputField").value;
		target = document.getElementById("target").innerText;
		
		score = 0;
		for(i = 0; i < typed.length; i++) {
			if(i < target.length) {
				if(typed.charAt(i) == target.charAt(i)) {
					score++;
				}
			}
		}
		
		setScoreText(score, typed.length, target.length);
		
		elapsed = (Date.now() - roundTime) / 1000;
		document.getElementById("time").innerText = "elapsed: " + elapsed;
		
		// https://www.speedtypingonline.com/typing-equations
		wpm = Math.floor((typed.length / 5) / (elapsed / 60));
		document.getElementById("wpm").innerText = "wpm: " + wpm;
	}
	
	function setScoreText(currentScore, numTyped, targetLength) {
		accuracy = 0;
		if(numTyped > 0) {
			accuracy = (currentScore / numTyped) * 100;
			accuracy = accuracy.toFixed(0);
		}
		
		document.getElementById("score").innerText = "score: " + currentScore + "/" + targetLength + " (" + accuracy + "%)";
	}
</script>

</body>
</html>